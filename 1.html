<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}

			#container {
				margin: 0 auto;
				text-align: center;
			}

			img {
				width: 640px;
				height: 480px;
			}

			ul {
				list-style: none;
			}
		</style>
				<script type="text/javascript">	
			window.onload=function(){
				var div = document.getElementById('container');
				var img = div.getElementsByTagName('img');
				window.addEventListener('scroll', function() {
					for (var i = 0; i < img.length; i++) {
						console.log('1');
						if (checkShow(img[i]) && !isLoaded(img[i])) {
							loadImg(img[i]);
						}
					}
				})
				for (var i = 0; i < img.length; i++) {
					if (checkShow(img[i]) && !isLoaded(img[i])) {
						loadImg(img[i]);
					}
				}
				// 判断img是否出现浏览器视野中
				function checkShow(img) {
					var scrollTop = document.documentElement.scrollTop; // 页面向上滚动的高度
					var windowHeight = window.innerHeight; //浏览器自身高度
					var offsetTop = img.offsetTop; //目标标签相对于document的高度
					return (offsetTop > scrollTop && offsetTop < (windowHeight + scrollTop));
				}
				// 判断是否已经加载过
				function isLoaded(img) {
					return img.getAttribute('src') === img.getAttribute('data-src');
				}
				// 加载图片
				function loadImg(img) {
					img.setAttribute('src', img.getAttribute('data-src'));
				}
			}
		</script>
	</head>
	<body>
		<div id="container">
			<ul>
				<li><img src="" alt="" data-src="img/1.jpg"></li>
				<li><img src="" alt="" data-src="img/2.jpg"></li>
				<li><img src="" alt="" data-src="img/3.jpg"></li>
				<li><img src="" alt="" data-src="img/4.jpg"></li>
				<li><img src="" alt="" data-src="img/5.jpg"></li>
			</ul>
		</div>
	</body>
</html>
